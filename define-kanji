#!/usr/bin/env perl
use strict;
use warnings;
use Lingua::JP::Kanjidic;
use Encode 'decode_utf8';
my $dic = Lingua::JP::Kanjidic->new("$ENV{HOME}/.kanjidic");

binmode(\*STDOUT, ':utf8');

for my $kanji (grep { /\p{Han}/ } split //, decode_utf8("@ARGV")) {
    my $definition = $dic->lookup($kanji);

    print $kanji;
    if ($definition) {
        print ' (' . $definition->heiseg . ')' if $definition->heiseg;
        print ': ';
        print join(', ', @{ $definition->meaning || ["???"] });
    }
    else {
        print ': ???';
    }

    print "\n";
}

